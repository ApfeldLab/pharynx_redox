DIRECTORY = '/Users/sean/Desktop/2018_06_14_SAY98_HD233';
[PARENT_DIR,EXP_NAME,~] = fileparts(DIRECTORY);

measurementTable = loadMeasurements(DIRECTORY);

%TODO what if this runs on directory without .LOG in it? do a try/catch
% new_log_info_path = fullfile(DIRECTORY, strcat(name, '.txt'));
% movefile(fullfile(DIRECTORY, strcat(name, '.LOG')), new_log_info_path);
% 
% log_info = readtable(new_log_info_path);
% strains = clusterColumns(new_log_info_path);



function measurementTable = loadMeasurements(directory)
% LOADMEASUREMENTS Load measurements from FIJI/ImageJ.
%
% This function expects the measurements to be in a file that ends in
% "_measurements.csv". If it doesn't find this, it throws an Error.
% 
% ARGUMENTS:
% directory - the directory to search for the measurements file in.
    if ~isfolder(directory)
        error('Error. The supplied directory is not a directory');
    end
    
    measurement_filename = dir(fullfile(directory, '*_measurements.csv'));
    if size(measurement_filename, 1) > 1
        error('Error. More than 1 measurement file in given directory. Delete one and try again');
    else
        measurement_filename = fullfile(measurement_filename(1).folder, measurement_filename(1).name);
    end
    
    measurementTable = readtable(measurement_filename, 'Delimiter', ',');
end

function 